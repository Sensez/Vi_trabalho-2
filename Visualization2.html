<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="d3/d3.js"></script>
  </head>
  <body>
    <script>

      var margin = 40;
      var width = 2500;
      var height = 1200;

      newDataSet = [];

      var svg = d3.select("body")
      .append("svg")
      .attr("width", width)
      .attr("height", height)

      d3.csv("complete.csv", function(error, data) {
        if (error) throw error;

        data.forEach(function(d) {
          var obj = new Object;
          obj["city"] = d.city;
          obj["shape"] = d.shape;
          obj["latitude"] = d.latitude;
          obj["longitude"] = d.longitude;
          newDataSet.push(obj);
        });

      d3.json("countries.geo.json", function(data) {
        var group = svg.selectAll("g")
        .data(data.features)
        .enter()
        .append("g")

        var projection = d3.geoMercator().scale(180);
        var path = d3.geoPath().projection(projection);

        var areas = group.append("path")
        .attr("d", path)
        .attr("class", "area")
        .attr("fill", "steelblue");

        svg.selectAll(".mark")
        .data(newDataSet)
        .enter()
        .append("image")
        .attr('class','mark')
        .attr('width', 20)
        .attr('height', 20)
        .attr("xlink:href", "images/Alien.png")
        .attr("transform", function(d) { return "translate(" + projection([d.longitude,d.latitude]) + ")";});

        });
    });
    </script>
  </body>
</html>
